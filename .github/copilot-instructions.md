# 基本
- 日本語で応答すること
- UTF-8 エンコーディングを使用すること
- *** 絵文字・特殊文字の使用は禁止 ***
- 必要に応じて、ユーザに質問を行い、要求を明確にすること
- 作業後、作業内容とユーザが次に取れる行動を説明すること
- 作業項目が多い場合は、段階に区切り、git commit を行いながら進めること
  - semantic commit を使用する
- コマンドの出力が確認できない場合、 get last command / check background terminal を使用して確認すること
- *** ルートディレクトリにはあらゆる形式のファイルを作成・自動生成するな ***
- すべてのファイルは適切なサブディレクトリに保存しろ
- mdファイルのファイル名の命名規則:
  - YYYYMMDD_内容の要約.md
- mdファイルの作成時には、必ず先頭にメタデータを含めること
  - タイトル、作成日、作成者、目的、関連タスクなど
  - すべてのmdファイルには、適切なセクションヘッダーを含めること
  - 目的に応じて、適切なディレクトリに保存すること
    - 例: docs/reports/、docs/plans/、docs/tasks/ など

## develop
各作業を以下のように定義する。
- 「調査」と指示された場合、都度 docs/reports に記載すること
- 「計画」と指示した場合、docs/plans に計画を記載する
  - 前回の内容が残っている場合は、読まずに消して構わない
  - コードベース / docs を読み込み、要件に関連性のあるファイルパスをすべて記載すること
  - 不明な点については、Serena mcp を使用して検索すること
  - 必要最小限の要件のみを記載すること
  - このフェーズで、コードを書いては絶対にいけない
- ユーザが「実装」と指示した場合、docs/tasks.md に記載された内容に基づいて実装を行う
  - 記載されている以上の実装を絶対に行わない
  - ここでデバッグしない
- 「デバッグ」と指示された場合、直前のタスクのデバッグ「手順」のみを示す
- *** `| Select-Object -First` オプションの使用厳禁 *** を遵守しろ

## tools
- Serena MCPの分析結果を参照すること
- Ultracite MCPのコード品質基準を満たすこと
- Context7 MCPで最新のライブラリ使用方法を確認すること
- gitには `docs/` ディレクトリのファイルを含めないこと
- gitプッシュ前には、すべての差分をgit diffで確認すること
- gitのコミットメッセージは簡潔な英語で作成すること

## architecture
- クリーンアーキテクチャを遵守すること
- SOLID原則を遵守すること
- DRY原則を遵守すること
- KISS原則を遵守すること
- YAGNI原則を遵守すること
- 適切なデザインパターンを使用すること
- 適切な命名規則を使用すること
- 適切なコード構造を維持すること
- 不要なコードを削除すること
- 適切なエラーハンドリングを実装すること

## testing
- *** t-wadaさんのTDD原則 *** を遵守しろ
 - Red, Green, Blueの各フェーズを明確に区別しろ
 - テストファーストで実装を行うこと
  - 実装機能を一切利用しないフェイクE2Eテストを実装するな
 - リファクタリングを怠らないこと
 - 変更があった場合は必ずテストを更新すること
 - テストケースを追加すること
 - 関心の分離を徹底すること
 - 凝集度を高めること
 - テスト容易性を考慮すること
 - テストが実装を歪めないこと
 - クラスや関数の名前の付け方に注意すること
 - 機能の多重化を避けること
 - 孤立機能の有無を確認すること
 - lintエラーや型エラーがないこと
- ユニットテスト、E2Eテストを必ず実装すること
- pytestの *** テスト結果表示の省略オプション使用厳禁 *** を遵守しろ
 - pytestの *** `-x` オプションは絶対に使用厳禁 *** を遵守しろ
 - pytestの *** `-maxfail` オプションは絶対に使用厳禁 *** を遵守しろ
 - pytestの `-v` オプションを必ず使用すること
 - テスト結果が詳細に表示されるようにしろ
 - 失敗したテストケースの情報を明確に把握できるようにしろ
 - テストのデバッグを容易にしろ
 - チームメンバーがテスト結果を理解しやすくすること